<h2>
  Event
  <span id="event-name-label">( {{ EventName }} )</span>
</h2>

<table id="event-table" cellspacing="0" cellpadding="1">
  @for (row of ColTable.Rows; track row) {
    <ng-container>
      <tr>
        @for (tc of row.Cols; track tc; let i = $index) {
          <ng-container>
            @if (tc.th) {
              <th
                [ngStyle]="{ 'background-color': tc.color, 'text-align': tc.align }"
                (click)="thClick(i)"
              >
                {{ tc.text }}
              </th>
            }
            @if (tc.td) {
              <td [ngStyle]="{ 'background-color': tc.color, 'text-align': tc.align }">
                {{ tc.text }}
              </td>
            }
          </ng-container>
        }
      </tr>
    </ng-container>
  }
</table>

@if (BOManager.BigButtonRow) {
  <div class="button-row">
    @if (BOManager.IsDebug) {
      <button mat-button (click)="clear()">Clear</button>
    }
    @if (BOManager.IsDebug) {
      <button mat-button (click)="loadResult()">Load</button>
    }
    <button mat-button (click)="setLayout(1)">Finish</button>
    <button mat-button (click)="setLayout(0)">Points</button>
    <button mat-button (click)="colorBtnClick(0)">{{ ColorBtnCaption }}</button>
    @if (BOManager.IsDebug) {
      <button mat-button (click)="sortOrderClear()">SO</button>
    }
  </div>
}

@if (!BOManager.BigButtonRow) {
  <ng-container>
    @if (BOManager.IsDebug) {
      <button mat-icon-button (click)="clear()">
        <mat-icon>delete</mat-icon>
      </button>
    }
    @if (BOManager.IsDebug) {
      <button mat-icon-button (click)="loadResult()">
        <mat-icon>explore</mat-icon>
      </button>
    }
    <button mat-icon-button (click)="setLayout(1)">
      <mat-icon color="primary">flag</mat-icon>
    </button>
    <button mat-icon-button (click)="setLayout(0)">
      <mat-icon>scatter_plot</mat-icon>
    </button>
    <button mat-icon-button (click)="colorBtnClick(1)">
      <mat-icon>brush</mat-icon>
    </button>
    <button mat-icon-button (click)="colorBtnClick(2)">
      <mat-icon color="primary">brush</mat-icon>
    </button>
    <button mat-icon-button (click)="colorBtnClick(3)">
      <mat-icon color="accent">brush</mat-icon>
    </button>
    @if (BOManager.IsDebug) {
      <button mat-icon-button (click)="sortOrderClear()">
        <mat-icon>sort</mat-icon>
      </button>
    }
    <button mat-icon-button (click)="toggleLegend()">
      <mat-icon>camera</mat-icon>
    </button>
  </ng-container>
}

@if (LegendVisible) {
  <app-icon-bar-legend [caption]="'Event'" [bar]="legend"></app-icon-bar-legend>
}
